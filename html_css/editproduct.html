<!DOCTYPE HTML>
<html>
    <head>
        <title>Edit Product</title>
        <link rel="stylesheet" href="style.css">
        <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    </head>
    <body>

        <center>
            <h1>Edit Product</h1>
            <input id="prodname" type="text" placeholder="Produkname"><br>
            <input id="prodprice" type="text" placeholder="Produktpreis"><br>
            <input id="prodimg" type="text" placeholder="Produktbild"><br><br>
            <button id="editProduct">Produkt Ãœbernehmen</button>
        </center>

        <script type="text/javascript">
            var editingProduct;
            $(document).ready(function () {
                var name = document.getElementById("prodname");
                var price = document.getElementById("prodprice");
                var image = document.getElementById("prodimg");

                var product = JSON.parse(localStorage.getItem("currentProduct"));
                editingProduct = product;
                name.value = product.name;
                price.value = product.price;
                image.value = product.picture;

                var changeButton = document.getElementById("editProduct");
                changeButton.onclick = function()
                {
                    var body = {
                        id: editingProduct.id,
                        name: name.value,
                        price: price.value,
                        picture: image.value
                    };

                    var request = new XMLHttpRequest();
                    request.open('POST', 'http://localhost:5000/api/prochoc/editProduct', true);
                    request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
                    request.onload = function() {

                        alert("Product wurde aktualisiert!");
                    };
                    request.send(JSON.stringify(body));
                };
            });
        </script>
    </body>
</html>
